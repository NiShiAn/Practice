<!DOCTYPE html>
<html>
<head>
    <style>
        html, body {
            height: 100%;
            margin:0;
        }
        .main {
            width: 100%;
            height: 500px;
            color: #fff;
            font-weight: 600;
            text-align: center;
            line-height: 500px;
            font-size: 16px;
        }
    </style>  
</head>
<body>
    <div id="container" class="main" style="background-color: rgb(204, 102, 0)">
        <pre onclick="changeColor()">切 换 颜 色</pre>
    </div>
<script type="text/javascript">
    var container = document.getElementById('container');
    // iframe接收消息，并把当前颜色发送给主页面  
    window.addEventListener('message', function (e) {
        if (e.source != window.parent)   
            return;
        container.style.backgroundColor = e.data;
        //var color = container.style.backgroundColor;  
        //window.parent.postMessage(color, '*');  
    }, false);  
    // 点击iframe时触发changeColor方法，把变化后的颜色发送给主页面  
    function changeColor() {       
        var  color  =  container.style.backgroundColor;  
        window.addEventListener('message', function (e) {
            if  (e.source  !=  window.parent)
                return;
            color = e.data;
            //var color = container.style.backgroundColor;  
            //window.parent.postMessage(color, '*');  
        },  false);  
        if (color  == 'rgb(204, 102, 0)')  
            color  = 'rgb(204, 204, 0)';  
        else  
            color  = 'rgb(204, 102, 0)';
        container.style.backgroundColor = color;  
        window.parent.postMessage(color, '*');  
    }
</script>  
</body>
</html>